(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var i=n.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&!e;)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e="empty",n="destroy",i="whole",r="stop",o=function(t){let e,n=t,i=0,r=!1,o=[0,0],a=[0,0];const c=function(){return r=i===n};return{getLifeShip:function(){return r},getLengthShip:function(){return n},isSunk:c,hit:function(){return i+=1,c(),i},getPointStart:function(){return o},getPointEnd:function(){return a},setPointStart:function(t){o=t},setPointEnd:function(t){a=t},getAxis:function(){return e},setAxis:function(t){e=t}}},a=function(){let t=[],a=[];const c=function(e){const[n,o]=s(e);if(e.setPointStart([n,o]),"Y"===e.getAxis()){for(let r=n;r<n+e.getLengthShip();r++)t[r][o]=i;e.setPointEnd([n+e.getLengthShip()-1,o])}else{for(let r=o;r<o+e.getLengthShip();r++)t[n][r]=i;e.setPointEnd([n,o+e.getLengthShip()-1])}!function(t,e){if("Y"===t.getAxis()){try{0!==t.getPointStart()[0]&&(e[t.getPointStart()[0]-1][t.getPointStart()[1]]=r)}catch(t){}try{t.getPointStart()[0]+t.getLengthShip()<=9&&(e[t.getPointStart()[0]+t.getLengthShip()][t.getPointStart()[1]]=r)}catch(t){}try{const n=t.getPointStart()[1]-1;if(0!==t.getPointStart()[0])for(let i=t.getPointStart()[0]-1;i<t.getLengthShip()+t.getPointStart()[0]+1;i++)i<=9&&(e[i][n]=r);else for(let i=t.getPointStart()[0];i<t.getLengthShip()+t.getPointStart()[0]+1;i++)i<=9&&(e[i][n]=r)}catch(t){}try{const n=t.getPointStart()[1]+1;if(0!==t.getPointStart()[0])for(let i=t.getPointStart()[0]-1;i<t.getLengthShip()+t.getPointStart()[0]+1;i++)i<=9&&(e[i][n]=r);else for(let i=t.getPointStart()[0];i<t.getLengthShip()+t.getPointStart()[0]+1;i++)i<=9&&(e[i][n]=r)}catch(t){}}else{try{0!==t.getPointStart()[1]&&(e[t.getPointStart()[0]][t.getPointStart()[1]-1]=r)}catch(t){}try{t.getPointStart()[1]+t.getLengthShip()<=9&&(e[t.getPointStart()[0]][t.getPointStart()[1]+t.getLengthShip()]=r)}catch(t){}try{const n=t.getPointStart()[0]-1;if(0!==t.getPointStart()[0])for(let i=t.getPointStart()[1]-1;i<t.getLengthShip()+t.getPointStart()[1]+1;i++)i<=9&&(e[n][i]=r);else for(let i=t.getPointStart()[1];i<t.getLengthShip()+t.getPointStart()[1]+1;i++)i<=9&&(e[n][i]=r)}catch(t){}try{const n=t.getPointStart()[0]+1;if(0!==t.getPointStart()[1])for(let i=t.getPointStart()[1]-1;i<t.getLengthShip()+t.getPointStart()[1]+1;i++)i<=9&&(e[n][i]=r);else for(let i=t.getPointStart()[1];i<t.getLengthShip()+t.getPointStart()[1]+1;i++)i<=9&&(e[n][i]=r)}catch(t){}}}(e,t)},s=function(t){let e,n,i=!1;for(;!0!==i;)e=Math.floor(9*Math.random()),n=Math.floor(9*Math.random()),t.setAxis(l()),i=g(t,n,e);return[n,e]},g=function(e,n,o){if("Y"===e.getAxis()){if(n+e.getLengthShip()-1>9)return!1;for(let a=n;a<n+e.getLengthShip();a++)if(t[a][o]===i||t[a][o]===r)return!1}else{if(o+e.getLengthShip()-1>9)return!1;for(let a=o;a<o+e.getLengthShip();a++)if(t[n][a]===i||t[n][a]===r)return!1}return!0};function h(e){if("Y"===e.getAxis())for(let i=e.getPointStart()[0];i<e.getPointStart()[0]+e.getLengthShip();i++)t[i][e.getPointStart()[1]]=n;else for(let i=e.getPointStart()[1];i<e.getPointStart()[1]+e.getLengthShip();i++)t[e.getPointStart()[0]][i]=n;return{attack:!0,ship_life:!0,ship:e}}function l(){return Math.floor(10*Math.random())>4?"X":"Y"}return{cycleArrangement:c,getRandomCoordinates:s,createBoard:function(){for(let n=0;n<10;n++){t.push([]);for(let i=0;i<10;i++)t[n][i]=e}return t},checkShipNearby:g,toggleAxis:l,arrangementShips:function(){const e=new o(4);c(e),a.push(e);const n=new o(3);c(n),a.push(n);const i=new o(3);c(i),a.push(i);const r=new o(2);c(r),a.push(r);const s=new o(2);c(s),a.push(s);const g=new o(2);c(g),a.push(g);const h=new o(1);c(h),a.push(h);const l=new o(1);c(l),a.push(l);const f=new o(1);c(f),a.push(f);const u=new o(1);c(u),a.push(u),console.log(t)},receiveAttack:function(n,o){return t[n][o]===i?function(e,n){for(let i=0;i<10;i++)if(e>=a[i].getPointStart()[0]&&e<=a[i].getPointEnd()[0]&&a[i].getPointStart()[1]===n||n>=a[i].getPointStart()[1]&&n<=a[i].getPointEnd()[1]&&a[i].getPointStart()[0]===e)return a[i].hit(),!0===a[i].isSunk()?h(a[i]):(t[e][n]="wrecked",{attack:!0,ship_life:!1});return!0}(n,o):t[n][o]===e||t[n][o]===r?(t[n][o]="miss",{attack:!1,ship_life:!1}):{attack:void 0,ship_life:void 0}},checkAllShips:function(){for(let t=0;t<a.length;t++)if(!0!==a[t].getLifeShip())return!1;return!0},getBoard:function(){return t},getShips:function(){return a}}},c=function(t){return{userAttack:function(t,e,n){let i,r=0;for(;1!==r;)if(i=t.receiveAttack(+e,+n),r=!0===i.attack||!1===i.attack?1:0,0===r)return void alert("Вы уже сюда стреляли");return{coordinateX:+n,coordinateY:+e,date_attack:i}},cleverBotAttack:function(t){let e,n,i,r=0;for(;1!==r;)e=Math.floor(10*Math.random()),n=Math.floor(10*Math.random()),i=t.receiveAttack(n,e),r=!0===i.attack||!1===i.attack?1:0;return{coordinateX:e,coordinateY:n,date_attack:i}},isWin:function(e){alert(`The ${t} won!`)}}};function s(t,e){e.map(((e,n)=>{e.map(((e,i)=>{const r=document.createElement("div");r.classList.add("cell"),r.dataset.idY=n,r.dataset.idX=i,t.appendChild(r)}))}))}function g(t,e){let n;if(e.forEach((e=>{+e.dataset.idX===t.coordinateX&&+e.dataset.idY===t.coordinateY&&(n=e)})),!0===t.date_attack.attack){if(n.classList.remove("whole"),n.classList.add("wrecked"),!0===t.date_attack.ship_life)if("Y"===t.date_attack.ship.getAxis())for(let n=t.date_attack.ship.getPointStart()[0];n<t.date_attack.ship.getPointStart()[0]+t.date_attack.ship.getLengthShip();n++)e.forEach((e=>{+e.dataset.idX===t.date_attack.ship.getPointStart()[1]&&+e.dataset.idY===n&&(e.classList.remove("whole"),e.classList.add("destroyer"))}));else for(let n=t.date_attack.ship.getPointStart()[1];n<t.date_attack.ship.getPointStart()[1]+t.date_attack.ship.getLengthShip();n++)e.forEach((e=>{+e.dataset.idX===n&&+e.dataset.idY===t.date_attack.ship.getPointStart()[0]&&(e.classList.remove("whole"),e.classList.add("destroyer"))}))}else n.classList.add("miss")}const h=t.p+"img/github..png";let l=new Image;l.src=h,l.classList.add("img_footer"),l.style.marginLeft="10px",document.querySelector(".link_footer>span").appendChild(l),function(){const t=new a,e=new a,n=prompt("What is name?","User");document.querySelector(".nameUser").textContent=n,document.querySelector(".nameBot").textContent="Bot";const i=new c(n),r=new c("Bot"),o=t.createBoard();t.arrangementShips();const h=e.createBoard();e.arrangementShips();const l=document.querySelector(".gridBot"),f=document.querySelector(".gridUser");s(l,o),s(f,h);const u=l.querySelectorAll(".cell"),d=f.querySelectorAll(".cell");let S,p,P;function m(t,e){!0===t.checkAllShips()&&setTimeout((()=>{e.isWin(e)}),500)}!function(t,e){let n,i;for(let o=0;o<t.length;o++)if([i,n]=t[o].getPointStart(),"Y"===t[o].getAxis())for(let a=i;a<=t[o].getPointEnd()[0];a++)r(a,n,e);else for(let a=n;a<=t[o].getPointEnd()[1];a++)r(i,a,e);function r(t,e,n){n.forEach((n=>{+n.dataset.idX===e&&+n.dataset.idY===t&&n.classList.add("whole")}))}}(e.getShips(),d),l.addEventListener("click",(n=>{n.target!==l&&!1!==P&&u.forEach((o=>{if(n.target===o){if(p=i.userAttack(t,o.dataset.idY,o.dataset.idX),void 0===p)return;g(p,u),m(t,i),P=!1,S=r.cleverBotAttack(e),g(S,d),m(e,r),P=!0}}))}))}()})();