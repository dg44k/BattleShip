(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var o=n.getElementsByTagName("script");if(o.length)for(var r=o.length-1;r>-1&&!e;)e=o[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e="empty",n="miss",o="destroy",r="whole",i="stop",a=function(t){let e,n=t,o=0,r=!1,i=[0,0],a=[0,0],c=[];const s=function(){return r=o===n};return{getLifeShip:function(){return r},getLengthShip:function(){return n},isSunk:s,hit:function(){return o+=1,s(),o},getPointStart:function(){return i},getPointEnd:function(){return a},setPointStart:function(t){i=t},setPointEnd:function(t){a=t},getAxis:function(){return e},setAxis:function(t){e=t},getStopZones:function(){return c},setStopZones:function(t){c.push(t)}}},c=function(){let t=[],c=[];const s=function(e){const[n,o]=l(e);if(e.setPointStart([n,o]),"Y"===e.getAxis()){for(let i=n;i<n+e.getLengthShip();i++)t[i][o]=r;e.setPointEnd([n+e.getLengthShip()-1,o])}else{for(let i=o;i<o+e.getLengthShip();i++)t[n][i]=r;e.setPointEnd([n,o+e.getLengthShip()-1])}!function(t,e){if("Y"===t.getAxis()){try{0!==t.getPointStart()[0]&&(e[t.getPointStart()[0]-1][t.getPointStart()[1]]=i,t.setStopZones([t.getPointStart()[0]-1,t.getPointStart()[1]]))}catch(t){}try{t.getPointStart()[0]+t.getLengthShip()<=9&&(e[t.getPointStart()[0]+t.getLengthShip()][t.getPointStart()[1]]=i,t.setStopZones([t.getPointStart()[0]+t.getLengthShip(),t.getPointStart()[1]]))}catch(t){}try{const n=t.getPointStart()[1]-1;if(0!==t.getPointStart()[0])for(let o=t.getPointStart()[0]-1;o<t.getLengthShip()+t.getPointStart()[0]+1;o++)o<=9&&n<=9&&o>=0&&n>=0&&(e[o][n]=i,t.setStopZones([o,n]));else for(let o=t.getPointStart()[0];o<t.getLengthShip()+t.getPointStart()[0]+1;o++)o<=9&&n<=9&&o>=0&&n>=0&&(e[o][n]=i,t.setStopZones([o,n]))}catch(t){}try{const n=t.getPointStart()[1]+1;if(0!==t.getPointStart()[0])for(let o=t.getPointStart()[0]-1;o<t.getLengthShip()+t.getPointStart()[0]+1;o++)o<=9&&n<=9&&o>=0&&n>=0&&(e[o][n]=i,t.setStopZones([o,n]));else for(let o=t.getPointStart()[0];o<t.getLengthShip()+t.getPointStart()[0]+1;o++)o<=9&&n<=9&&o>=0&&n>=0&&(e[o][n]=i,t.setStopZones([o,n]))}catch(t){}}else{try{0!==t.getPointStart()[1]&&(e[t.getPointStart()[0]][t.getPointStart()[1]-1]=i,t.setStopZones([t.getPointStart()[0],t.getPointStart()[1]-1]))}catch(t){}try{t.getPointStart()[1]+t.getLengthShip()<=9&&(e[t.getPointStart()[0]][t.getPointStart()[1]+t.getLengthShip()]=i,t.setStopZones([t.getPointStart()[0],t.getPointStart()[1]+t.getLengthShip()]))}catch(t){}try{const n=t.getPointStart()[0]-1;if(0!==t.getPointStart()[0])for(let o=t.getPointStart()[1]-1;o<t.getLengthShip()+t.getPointStart()[1]+1;o++)o<=9&&n<=9&&o>=0&&n>=0&&(e[n][o]=i,t.setStopZones([n,o]));else for(let o=t.getPointStart()[1];o<t.getLengthShip()+t.getPointStart()[1]+1;o++)o<=9&&n<=9&&o>=0&&n>=0&&(e[n][o]=i,t.setStopZones([n,o]))}catch(t){}try{const n=t.getPointStart()[0]+1;if(0!==t.getPointStart()[1])for(let o=t.getPointStart()[1]-1;o<t.getLengthShip()+t.getPointStart()[1]+1;o++)o<=9&&n<=9&&o>=0&&n>=0&&(e[n][o]=i,t.setStopZones([n,o]));else for(let o=t.getPointStart()[1];o<t.getLengthShip()+t.getPointStart()[1]+1;o++)o<=9&&n<=9&&o>=0&&n>=0&&(e[n][o]=i,t.setStopZones([n,o]))}catch(t){}}}(e,t)},l=function(t){let e,n,o=!1;for(;!0!==o;)e=Math.floor(10*Math.random()),n=Math.floor(10*Math.random()),t.setAxis(u()),o=g(t,n,e);return[n,e]},g=function(e,n,o){if("Y"===e.getAxis()){if(n+e.getLengthShip()-1>9)return!1;for(let a=n;a<n+e.getLengthShip();a++)if(t[a][o]===r||t[a][o]===i)return!1}else{if(o+e.getLengthShip()-1>9)return!1;for(let a=o;a<o+e.getLengthShip();a++)if(t[n][a]===r||t[n][a]===i)return!1}return!0};function d(e){if("Y"===e.getAxis())for(let n=e.getPointStart()[0];n<e.getPointStart()[0]+e.getLengthShip();n++)t[n][e.getPointStart()[1]]=o;else for(let n=e.getPointStart()[1];n<e.getPointStart()[1]+e.getLengthShip();n++)t[e.getPointStart()[0]][n]=o;let r=e.getStopZones();for(let e=0;e<r.length;e++)t[r[e][0]][r[e][1]]!==n&&(t[r[e][0]][r[e][1]]=n);return{attack:!0,ship_life:!0,ship:e}}function u(){return Math.floor(10*Math.random())>4?"X":"Y"}return{cycleArrangement:s,getRandomCoordinates:l,createBoard:function(){for(let n=0;n<10;n++){t.push([]);for(let o=0;o<10;o++)t[n][o]=e}return t},checkShipNearby:g,toggleAxis:u,arrangementShips:function(){const t=new a(4);s(t),c.push(t);const e=new a(3);s(e),c.push(e);const n=new a(3);s(n),c.push(n);const o=new a(2);s(o),c.push(o);const r=new a(2);s(r),c.push(r);const i=new a(2);s(i),c.push(i);const l=new a(1);s(l),c.push(l);const g=new a(1);s(g),c.push(g);const d=new a(1);s(d),c.push(d);const u=new a(1);s(u),c.push(u)},receiveAttack:function(o,a){return t[o][a]===r?function(e,n){for(let o=0;o<10;o++)if(e>=c[o].getPointStart()[0]&&e<=c[o].getPointEnd()[0]&&c[o].getPointStart()[1]===n||n>=c[o].getPointStart()[1]&&n<=c[o].getPointEnd()[1]&&c[o].getPointStart()[0]===e)return c[o].hit(),!0===c[o].isSunk()?d(c[o]):(t[e][n]="wrecked",{attack:!0,ship_life:!1});return!0}(o,a):t[o][a]===e||t[o][a]===i?(t[o][a]=n,{attack:!1,ship_life:!1}):{attack:void 0,ship_life:void 0}},checkAllShips:function(){for(let t=0;t<c.length;t++)if(!0!==c[t].getLifeShip())return!1;return!0},getBoard:function(){return t},getShips:function(){return c}}},s=function(t){return{userAttack:function(t,e,n){let o,r=0;for(;1!==r;)if(o=t.receiveAttack(+e,+n),r=!0===o.attack||!1===o.attack?1:0,0===r)return document.querySelector(".err").style.display="flex",document.querySelector(".modal_block_err").style.display="block",void document.querySelector(".btn-ok").addEventListener("click",(()=>{document.querySelector(".modal_block_err").style.display="none",document.querySelector(".err").style.display="none"}));return{coordinateX:+n,coordinateY:+e,date_attack:o}},cleverBotAttack:function(t){let e,n,o,r=0;for(;1!==r;)e=Math.floor(10*Math.random()),n=Math.floor(10*Math.random()),o=t.receiveAttack(n,e),r=!0===o.attack||!1===o.attack?1:0;return{coordinateX:e,coordinateY:n,date_attack:o}},isWin:function(){document.querySelector(".end").style.display="flex",document.querySelector(".modal_block_end").style.display="block",document.querySelector(".title_win").textContent=`${t} won!`,document.querySelector(".btn-newGame").addEventListener("click",(()=>{location.reload()}))}}};function l(t,e){e.map(((e,n)=>{e.map(((e,o)=>{const r=document.createElement("div");r.classList.add("cell"),r.dataset.idY=n,r.dataset.idX=o,t.appendChild(r)}))}))}function g(t,e){let n;if(e.forEach((e=>{+e.dataset.idX===t.coordinateX&&+e.dataset.idY===t.coordinateY&&(n=e)})),!0===t.date_attack.attack){if(n.classList.remove("whole"),n.classList.add("wrecked"),!0===t.date_attack.ship_life){if("Y"===t.date_attack.ship.getAxis())for(let n=t.date_attack.ship.getPointStart()[0];n<t.date_attack.ship.getPointStart()[0]+t.date_attack.ship.getLengthShip();n++)e.forEach((e=>{+e.dataset.idX===t.date_attack.ship.getPointStart()[1]&&+e.dataset.idY===n&&(e.classList.remove("whole"),e.classList.add("destroyer"))}));else for(let n=t.date_attack.ship.getPointStart()[1];n<t.date_attack.ship.getPointStart()[1]+t.date_attack.ship.getLengthShip();n++)e.forEach((e=>{+e.dataset.idX===n&&+e.dataset.idY===t.date_attack.ship.getPointStart()[0]&&(e.classList.remove("whole"),e.classList.add("destroyer"))}));let n=t.date_attack.ship.getStopZones();for(let t=0;t<n.length;t++)e.forEach((e=>{+e.dataset.idX!==n[t][1]||+e.dataset.idY!==n[t][0]||e.classList.contains("miss")||e.classList.add("miss")}))}}else n.classList.add("miss")}function d(){const t=document.querySelector(".anchor"),e=window.getComputedStyle(t);switch(!0){case"0deg"===e.rotate:document.querySelector(".anchor").style.rotate="180deg";break;case"180deg"===e.rotate:document.querySelector(".anchor").style.rotate="0deg";break;case"90deg"===e.rotate:document.querySelector(".anchor").style.rotate="270deg";break;case"270deg"===e.rotate:document.querySelector(".anchor").style.rotate="90deg"}}const u=t.p+"img/github..png",h=t.p+"img/anchor..png";document.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".start").style.display="block",document.querySelector(".btn-primary").addEventListener("click",(()=>{const t=document.querySelector(".inputName").value||"User";document.querySelector(".nameUser").textContent=t,document.querySelector(".nameBot").textContent="Bot",document.querySelector(".modal").style.display="none",document.querySelector(".modal_block_start").style.display="none";let e=new Image;e.src=h,e.classList.add("anchor"),document.querySelector(".anchorBlock").appendChild(e),function(t){let e=new c;const n=new c,o=new s(t),r=new s("Bot"),i=e.createBoard();e.arrangementShips();const a=n.createBoard();n.arrangementShips();const u=document.querySelector(".gridBot"),h=document.querySelector(".gridUser");l(u,i),l(h,a);const S=u.querySelectorAll(".cell"),p=h.querySelectorAll(".cell");let f,P,m;function y(t,e){!0===t.checkAllShips()&&setTimeout((()=>{e.isWin()}),500)}!function(t,e){let n,o;for(let i=0;i<t.length;i++)if([o,n]=t[i].getPointStart(),"Y"===t[i].getAxis())for(let a=o;a<=t[i].getPointEnd()[0];a++)r(a,n,e);else for(let a=n;a<=t[i].getPointEnd()[1];a++)r(o,a,e);function r(t,e,n){n.forEach((n=>{+n.dataset.idX===e&&+n.dataset.idY===t&&n.classList.add("whole")}))}}(n.getShips(),p),u.addEventListener("click",(t=>{t.target!==u&&!1!==m&&S.forEach((i=>{if(t.target===i){if(P=o.userAttack(e,i.dataset.idY,i.dataset.idX),void 0===P)return;g(P,S),y(e,o),m=!1,d(),setTimeout((()=>{f=r.cleverBotAttack(n),g(f,p),y(n,r),m=!0,d()}),1e3)}}))}))}(t)}))}));let S=new Image;S.src=u,S.classList.add("img_footer"),document.querySelector(".link_footer").appendChild(S)})();